// Code generated by terraform-provider-libvirt codegen. DO NOT EDIT.

package generated

import (
	"github.com/hashicorp/terraform-plugin-framework/attr"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/boolplanmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/int64planmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/planmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/stringplanmodifier"
	"github.com/hashicorp/terraform-plugin-framework/types"
)

var (
	_ = types.StringNull()              // Avoid unused import errors
	_ planmodifier.String               // Avoid unused import errors
	_ = stringplanmodifier.UseStateForUnknown
	_ = int64planmodifier.UseStateForUnknown
	_ = boolplanmodifier.UseStateForUnknown
)

{{- range $index, $struct := .Structs }}

{{- if $struct.IsExcluded }}
// {{ $struct.Name }}SchemaAttribute requires manual implementation.
// Reason: {{ $struct.ExclusionReason }}
// See internal/codegen/exclusions/exclusions.go and README.md
{{- else }}
// {{ $struct.Name }}SchemaAttribute returns the Terraform schema for {{ $struct.Name }} as a nested attribute.
// Use this when embedding {{ $struct.Name }} within another schema.
func {{ $struct.Name }}SchemaAttribute() schema.Attribute {
	return schema.SingleNestedAttribute{
		{{- if $struct.Description }}
		Description: {{ printf "%q" $struct.Description }},
		{{- end }}
		{{- if $struct.MarkdownDescription }}
		MarkdownDescription: {{ printf "%q" $struct.MarkdownDescription }},
		{{- end }}
		Optional: true,
		Attributes: map[string]schema.Attribute{
			{{- range $struct.Fields }}
			{{- if and (not .IsExcluded) (not .IsCycle) }}
			"{{ .TFName }}": {{ template "fieldSchema" . }},
			{{- end }}
			{{- end }}
		},
	}
}
{{- end }}

{{- if $struct.IsExcluded }}
// {{ $struct.Name }}AttributeTypes requires manual implementation.
// Reason: {{ $struct.ExclusionReason }}
// See internal/codegen/exclusions/exclusions.go and README.md
{{- else }}
// {{ $struct.Name }}AttributeTypes returns the attribute types for {{ $struct.Name }}.
// Use this when creating types.Object values for {{ $struct.Name }}.
func {{ $struct.Name }}AttributeTypes() map[string]attr.Type {
	return map[string]attr.Type{
		{{- range $struct.Fields }}
		{{- if and (not .IsExcluded) (not .IsCycle) }}
		"{{ .TFName }}": {{ template "attrType" . }},
		{{- end }}
		{{- end }}
	}
}
{{- end }}

{{- if and $struct.IsTopLevel (not $struct.IsExcluded) }}
// {{ $struct.Name }}Schema returns a complete schema.Schema for {{ $struct.Name }}.
// Use this for top-level resources. Pass resource-specific attributes (like id) as overrides.
func {{ $struct.Name }}Schema(overrides map[string]schema.Attribute) schema.Schema {
	attrs := map[string]schema.Attribute{
		{{- range $struct.Fields }}
		{{- if and (not .IsExcluded) (not .IsCycle) }}
		"{{ .TFName }}": {{ template "fieldSchema" . }},
		{{- end }}
		{{- end }}
	}

	// Merge in resource-specific overrides
	for k, v := range overrides {
		attrs[k] = v
	}

	return schema.Schema{
		{{- if $struct.Description }}
		Description: {{ printf "%q" $struct.Description }},
		{{- end }}
		{{- if $struct.MarkdownDescription }}
		MarkdownDescription: {{ printf "%q" $struct.MarkdownDescription }},
		{{- end }}
		Attributes: attrs,
	}
}
{{- end }}
{{- end }}

{{- define "fieldSchema" }}
{{- if and .IsList .IsNested }}
schema.ListNestedAttribute{
	{{- if .Description }}
	Description: {{ printf "%q" .Description }},
	{{- end }}
	{{- if .MarkdownDescription }}
	MarkdownDescription: {{ printf "%q" .MarkdownDescription }},
	{{- end }}
	{{- if .IsRequired }}
	Required: true,
	{{- else }}
	Optional: true,
	{{- end }}
	NestedObject: schema.NestedAttributeObject{
		Attributes: map[string]schema.Attribute{
			{{- range .NestedStruct.Fields }}
			"{{ .TFName }}": {{ template "fieldSchema" . }},
			{{- end }}
		},
	},
}
{{- else if .IsList }}
schema.ListAttribute{
	{{- if .Description }}
	Description: {{ printf "%q" .Description }},
	{{- end }}
	{{- if .MarkdownDescription }}
	MarkdownDescription: {{ printf "%q" .MarkdownDescription }},
	{{- end }}
	{{- if .IsRequired }}
	Required: true,
	{{- else }}
	Optional: true,
	{{- end }}
	ElementType: {{ .ElementType }},
}
{{- else if .IsNested }}
{{ .NestedStruct.Name }}SchemaAttribute()
{{- else }}
{{ .SchemaType }}{
	{{- if .Description }}
	Description: {{ printf "%q" .Description }},
	{{- end }}
	{{- if .MarkdownDescription }}
	MarkdownDescription: {{ printf "%q" .MarkdownDescription }},
	{{- end }}
	{{- if .IsRequired }}
	Required: true,
	{{- else if .IsComputed }}
	Computed: true,
	{{- else }}
	Optional: true,
	{{- end }}
	{{- if .PlanModifier }}
	PlanModifiers: []planmodifier.{{ if eq .TFType "types.String" }}String{{ else if eq .TFType "types.Int64" }}Int64{{ else if eq .TFType "types.Bool" }}Bool{{ else }}String{{ end }}{
		{{ if eq .TFType "types.String" }}stringplanmodifier{{ else if eq .TFType "types.Int64" }}int64planmodifier{{ else if eq .TFType "types.Bool" }}boolplanmodifier{{ else }}stringplanmodifier{{ end }}.{{ .PlanModifier }}(),
	},
	{{- end }}
}
{{- end }}
{{- end }}

{{- define "attrType" }}
{{- if and .IsList .IsNested }}
types.ListType{ElemType: types.ObjectType{AttrTypes: {{ .NestedStruct.Name }}AttributeTypes()}}
{{- else if .IsList }}
types.ListType{ElemType: {{ .ElementType }}}
{{- else if .IsNested }}
types.ObjectType{AttrTypes: {{ .NestedStruct.Name }}AttributeTypes()}
{{- else if eq .TFType "types.String" }}
types.StringType
{{- else if eq .TFType "types.Int64" }}
types.Int64Type
{{- else if eq .TFType "types.Bool" }}
types.BoolType
{{- else }}
types.StringType
{{- end }}
{{- end }}
