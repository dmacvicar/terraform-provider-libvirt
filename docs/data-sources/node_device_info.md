---
page_title: "Data Source libvirt_node_device_info - terraform-provider-libvirt"
subcategory: ""
description: |-
  Fetches detailed information about a specific libvirt host node device.
  This data source provides comprehensive details about hardware devices, including PCI devices for passthrough, USB devices, network interfaces, and storage devices.
---

# libvirt_node_device_info (Data Source)

Fetches detailed information about a specific libvirt host node device.

This data source provides comprehensive details about hardware devices, including PCI devices for passthrough, USB devices, network interfaces, and storage devices.

## Example Usage

```terraform
# Get list of PCI devices
data "libvirt_node_devices" "pci" {
  capability = "pci"
}

# Get detailed information about a specific PCI device
data "libvirt_node_device_info" "gpu" {
  name = "pci_0000_01_00_0"  # Example: NVIDIA GPU
}

# Access PCI device details
output "gpu_vendor" {
  description = "GPU vendor name"
  value       = data.libvirt_node_device_info.gpu.capability.vendor_name
}

output "gpu_product" {
  description = "GPU product name"
  value       = data.libvirt_node_device_info.gpu.capability.product_name
}

output "gpu_iommu_group" {
  description = "IOMMU group for GPU passthrough"
  value       = data.libvirt_node_device_info.gpu.capability.iommu_group
}

output "gpu_pci_address" {
  description = "PCI address of the GPU"
  value = format("%04x:%02x:%02x.%x",
    data.libvirt_node_device_info.gpu.capability.domain,
    data.libvirt_node_device_info.gpu.capability.bus,
    data.libvirt_node_device_info.gpu.capability.slot,
    data.libvirt_node_device_info.gpu.capability.function
  )
}

# Get network interface details
data "libvirt_node_devices" "net" {
  capability = "net"
}

data "libvirt_node_device_info" "eth0" {
  name = element([for d in data.libvirt_node_devices.net.devices : d if strcontains(d, "eth0")], 0)
}

output "eth0_mac" {
  description = "MAC address of eth0"
  value       = data.libvirt_node_device_info.eth0.capability.address
}

output "eth0_link_state" {
  description = "Link state of eth0"
  value       = data.libvirt_node_device_info.eth0.capability.link_state
}

# Get storage device details
data "libvirt_node_devices" "storage" {
  capability = "storage"
}

data "libvirt_node_device_info" "disk" {
  name = tolist(data.libvirt_node_devices.storage.devices)[0]
}

output "disk_model" {
  description = "Storage device model"
  value       = data.libvirt_node_device_info.disk.capability.model
}

output "disk_serial" {
  description = "Storage device serial number"
  value       = data.libvirt_node_device_info.disk.capability.serial
}

output "disk_size_gb" {
  description = "Storage device capacity in GB"
  value       = data.libvirt_node_device_info.disk.capability.size / 1024 / 1024 / 1024
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Device name from `libvirt_node_devices` data source (e.g., `pci_0000_00_1f_2`).

### Read-Only

- `capability` (Attributes) Device capability details. Fields populated depend on the device type. (see [below for nested schema](#nestedatt--capability))
- `id` (String) Internal identifier for this data source.
- `parent` (String) Parent device name in the device hierarchy.
- `path` (String) Sysfs path to the device.

<a id="nestedatt--capability"></a>
### Nested Schema for `capability`

Read-Only:

- `address` (String) MAC address or device address.
- `block` (String) Block device path (e.g., `/dev/sda`).
- `bus` (Number) PCI/USB bus number.
- `class` (String) PCI class code (e.g., `0x030000` for VGA).
- `device_number` (Number) USB device number.
- `domain` (Number) PCI domain number.
- `drive_type` (String) Drive type (e.g., `disk`, `cdrom`).
- `function` (Number) PCI function number.
- `host` (Number) SCSI host number.
- `interface` (String) Network interface name (e.g., `eth0`).
- `iommu_group` (Number) IOMMU group number (for PCI passthrough).
- `link_speed` (String) Network link speed.
- `link_state` (String) Network link state (e.g., `up`, `down`).
- `logical_block_size` (Number) Logical block size in bytes.
- `lun` (Number) SCSI LUN (Logical Unit Number).
- `model` (String) Device model name.
- `num_blocks` (Number) Number of blocks.
- `product_id` (String) Product ID (vendor-specific identifier).
- `product_name` (String) Product name or description.
- `scsi_type` (String) SCSI device type.
- `serial` (String) Device serial number.
- `size` (Number) Storage capacity in bytes.
- `slot` (Number) PCI slot number.
- `target` (Number) SCSI target number.
- `type` (String) Capability type (e.g., `pci`, `usb_device`, `net`, `storage`).
- `vendor_id` (String) Vendor ID.
- `vendor_name` (String) Vendor name.
