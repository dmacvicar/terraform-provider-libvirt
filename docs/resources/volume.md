---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "libvirt_volume Resource - terraform-provider-libvirt"
subcategory: ""
description: |-
  Manages a libvirt storage volume.
  Storage volumes are images (qcow2, raw, etc.) stored in a storage pool that can be attached to virtual machines.
  See the libvirt storage volume documentation https://libvirt.org/formatstorage.html for more details.
---

# libvirt_volume (Resource)

Manages a libvirt storage volume.

Storage volumes are images (qcow2, raw, etc.) stored in a storage pool that can be attached to virtual machines.

See the [libvirt storage volume documentation](https://libvirt.org/formatstorage.html) for more details.

## Example Usage

```terraform
# Basic volume
resource "libvirt_volume" "example" {
  name     = "example.qcow2"
  pool     = "default"
  capacity = 10737418240 # 10 GB
  format   = "qcow2"
}

# Volume with backing store
resource "libvirt_volume" "base" {
  name     = "base.qcow2"
  pool     = "default"
  capacity = 10737418240
  format   = "qcow2"
}

resource "libvirt_volume" "overlay" {
  name     = "overlay.qcow2"
  pool     = "default"
  capacity = 10737418240

  backing_store = {
    path   = libvirt_volume.base.path
    format = "qcow2"
  }
}

# Volume from HTTP URL upload
resource "libvirt_volume" "ubuntu_base" {
  name   = "ubuntu-22.04.qcow2"
  pool   = "default"
  format = "qcow2"

  create = {
    content = {
      url = "https://cloud-images.ubuntu.com/releases/22.04/release/ubuntu-22.04-server-cloudimg-amd64.img"
    }
  }
  # capacity is automatically computed from Content-Length header
}

# Volume from local file upload
resource "libvirt_volume" "from_local" {
  name   = "custom-image.qcow2"
  pool   = "default"
  format = "qcow2"

  create = {
    content = {
      url = "/path/to/local/image.qcow2"
      # or: url = "file:///path/to/local/image.qcow2"
    }
  }
  # capacity is automatically computed from file size
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the storage volume
- `pool` (String) Name of the storage pool where the volume will be created

### Optional

- `backing_store` (Attributes) Backing store configuration for copy-on-write volumes (see [below for nested schema](#nestedatt--backing_store))
- `capacity` (Number) Volume capacity in bytes. Required for empty volumes, computed when using create.content
- `create` (Attributes) Volume creation options for initializing volume content from external sources (see [below for nested schema](#nestedatt--create))
- `format` (String) Volume format (qcow2, raw, etc.)
- `permissions` (Attributes) Permissions for the volume file (see [below for nested schema](#nestedatt--permissions))
- `type` (String) Volume type (file, block, dir, network, netdir)

### Read-Only

- `allocation` (Number) Currently allocated size in bytes
- `id` (String) Volume identifier (same as key)
- `key` (String) Unique key of the storage volume
- `path` (String) Full path to the volume on the host

<a id="nestedatt--backing_store"></a>
### Nested Schema for `backing_store`

Required:

- `path` (String) Path to the backing volume

Optional:

- `format` (String) Format of the backing volume


<a id="nestedatt--create"></a>
### Nested Schema for `create`

Required:

- `content` (Attributes) Upload content from a URL or local file (see [below for nested schema](#nestedatt--create--content))

<a id="nestedatt--create--content"></a>
### Nested Schema for `create.content`

Required:

- `url` (String) URL to download content from (supports https://, file://, or absolute paths)



<a id="nestedatt--permissions"></a>
### Nested Schema for `permissions`

Optional:

- `group` (String) Numeric group ID for the volume file group
- `label` (String) SELinux label for the volume file
- `mode` (String) Octal permission mode for the volume file (e.g., '0644')
- `owner` (String) Numeric user ID for the volume file owner
